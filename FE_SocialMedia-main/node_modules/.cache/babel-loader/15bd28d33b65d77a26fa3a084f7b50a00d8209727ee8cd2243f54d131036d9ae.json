{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\XDPMTMHPL\\\\doan\\\\FE_SocialMedia-main\\\\src\\\\components\\\\PostCard.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// import React, { useState } from \"react\";\n// import { Link } from \"react-router-dom\";\n// import moment from \"moment\";\n// import { NoProfile } from \"../assets\";\n// import { BiComment, BiLike, BiSolidLike } from \"react-icons/bi\";\n// import { MdOutlineDeleteOutline } from \"react-icons/md\";\n// import { useForm } from \"react-hook-form\";\n// import TextInput from \"./TextInput\";\n// import Loading from \"./Loading\";\n// import CustomButton from \"./CustomButton\";\n// // import { postComments } from \"../assets/data\";\n\n// const ReplyCard = ({ reply, user, handleLike }) => {\n//   return (\n//     <div className='w-full py-3'>\n//       <div className='flex gap-3 items-center mb-1'>\n//         <Link to={\"/profile/\" + reply?.userId?._id}>\n//           <img\n//             src={reply?.userId?.profileUrl ?? NoProfile}\n//             alt={reply?.userId?.firstName}\n//             className='w-10 h-10 rounded-full object-cover'\n//           />\n//         </Link>\n\n//         <div>\n//           <Link to={\"/profile/\" + reply?.userId?._id}>\n//             <p className='font-medium text-base text-ascent-1'>\n//               {reply?.userId?.firstName} {reply?.userId?.lastName}\n//             </p>\n//           </Link>\n//           <span className='text-ascent-2 text-sm'>\n//             {moment(reply?.createdAt).fromNow()}\n//           </span>\n//         </div>\n//       </div>\n\n//       <div className='ml-12'>\n//         <p className='text-ascent-2 '>{reply?.comment}</p>\n//         <div className='mt-2 flex gap-6'>\n//           <p\n//             className='flex gap-2 items-center text-base text-ascent-2 cursor-pointer'\n//             onClick={handleLike}\n//           >\n//             {reply?.likes?.includes(user?._id) ? (\n//               <BiSolidLike size={20} color='blue' />\n//             ) : (\n//               <BiLike size={20} />\n//             )}\n//             {reply?.likes?.length} Likes\n//           </p>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// const CommentForm = ({ user, id, replyAt, getComments }) => {\n//   const [loading, setLoading] = useState(false);\n//   const [errMsg, setErrMsg] = useState(\"\");\n//   const {\n//     register,\n//     handleSubmit,\n//     reset,\n//     formState: { errors },\n//   } = useForm({\n//     mode: \"onChange\",\n//   });\n\n//   const onSubmit = async (data) => {};\n\n//   return (\n//     <form\n//       onSubmit={handleSubmit(onSubmit)}\n//       className='w-full border-b border-[#66666645]'\n//     >\n//       <div className='w-full flex items-center gap-2 py-4'>\n//         <img\n//           src={user?.profileUrl ?? NoProfile}\n//           alt='User Image'\n//           className='w-10 h-10 rounded-full object-cover'\n//         />\n\n//         <TextInput\n//           name='comment'\n//           styles='w-full rounded-full py-3'\n//           placeholder={replyAt ? `Reply @${replyAt}` : \"Comment this post\"}\n//           register={register(\"comment\", {\n//             required: \"Comment can not be empty\",\n//           })}\n//           error={errors.comment ? errors.comment.message : \"\"}\n//         />\n//       </div>\n//       {errMsg?.message && (\n//         <span\n//           role='alert'\n//           className={`text-sm ${\n//             errMsg?.status === \"failed\"\n//               ? \"text-[#f64949fe]\"\n//               : \"text-[#2ba150fe]\"\n//           } mt-0.5`}\n//         >\n//           {errMsg?.message}\n//         </span>\n//       )}\n\n//       <div className='flex items-end justify-end pb-2'>\n//         {loading ? (\n//           <Loading />\n//         ) : (\n//           <CustomButton\n//             title='Submit'\n//             type='submit'\n//             containerStyles='bg-[#0444a4] text-white py-1 px-3 rounded-full font-semibold text-sm'\n//           />\n//         )}\n//       </div>\n//     </form>\n//   );\n// };\n\n// const PostCard = ({ post, user, deletePost, likePost }) => {\n//   const [showAll, setShowAll] = useState(0);\n//   const [showReply, setShowReply] = useState(0);\n//   const [comments, setComments] = useState([]);\n//   const [loading, setLoading] = useState(false);\n//   const [replyComments, setReplyComments] = useState(0);\n//   const [showComments, setShowComments] = useState(0);\n//   const getComments = async () => {\n//     setReplyComments(0);\n\n//     // setComments(postComments);\n//     setLoading(false);\n//   };\n//   const handleLike = async () => {};\n\n//   return (\n//     <div className='mb-2 bg-primary p-4 rounded-xl'>\n//       <div className='flex gap-3 items-center mb-2'>\n//         <Link to={\"/profile/\" + post?.userId?._id}>\n//           <img\n//             src={post?.userId?.profileUrl ?? NoProfile}\n//             alt={post?.userId?.firstName}\n//             className='w-14 h-14 object-cover rounded-full'\n//           />\n//         </Link>\n\n//         <div className='w-full flex justify-between'>\n//           <div className=''>\n//             <Link to={\"/profile/\" + post?.userId}>\n//               <p className='font-medium text-lg text-ascent-1'>\n//                 {post?.userId?.firstName} {post?.userId?.username}\n//               </p>\n//             </Link>\n//             <span className='text-ascent-2'>{post?.userId?.location}</span>\n//           </div>\n\n//           <span className='text-ascent-2'>\n//             {moment(post?.createdAt ?? \"2023-05-25\").fromNow()}\n//           </span>\n//         </div>\n//       </div>\n\n//       <div>\n//         <p className='text-ascent-2'>\n//           {showAll === post?._id\n//             ? post?.description\n\n//             : post?.description.slice(0, 300)}\n\n//           {post?.description?.length > 301 &&\n//             (showAll === post?._id ? (\n//               <span\n//                 className='text-blue ml-2 font-mediu cursor-pointer'\n//                 onClick={() => setShowAll(0)}\n//               >\n//                 Show Less\n//               </span>\n//             ) : (\n//               <span\n//                 className='text-blue ml-2 font-medium cursor-pointer'\n//                 onClick={() => setShowAll(post?._id)}\n//               >\n//                 Show More\n//               </span>\n//             ))}\n//         </p>\n\n//         {post?.image && (\n//           <img\n//             src={post?.image}\n//             alt='post image'\n//             className='w-full mt-2 rounded-lg'\n//           />\n//         )}\n//       </div>\n\n//       <div\n//         className='mt-4 flex justify-between items-center px-3 py-2 text-ascent-2\n//       text-base border-t border-[#66666645]'\n//       >\n//         <p className='flex gap-2 items-center text-base cursor-pointer'>\n//           {post?.likes?.includes(user?._id) ? (\n//             <BiSolidLike size={20} color='blue' />\n//           ) : (\n//             <BiLike size={20} />\n//           )}\n//           {post?.likes?.length} Likes\n//         </p>\n\n//         <p\n//           className='flex gap-2 items-center text-base cursor-pointer'\n//           onClick={() => {\n//             setShowComments(showComments === post._id ? null : post._id);\n//             getComments(post?._id);\n//           }}\n//         >\n//           <BiComment size={20} />\n//           {post?.comments?.length} Comments\n//         </p>\n\n//         {user?._id === post?.userId?._id && (\n//           <div\n//             className='flex gap-1 items-center text-base text-ascent-1 cursor-pointer'\n//             onClick={() => deletePost(post?._id)}\n//           >\n//             <MdOutlineDeleteOutline size={20} />\n//             <span>Delete</span>\n//           </div>\n//         )}\n//       </div>\n\n//       {/* COMMENTS */}\n//       {showComments === post?._id && (\n//         <div className='w-full mt-4 border-t border-[#66666645] pt-4 '>\n//           <CommentForm\n//             user={user}\n//             id={post?._id}\n//             getComments={() => getComments(post?._id)}\n//           />\n\n//           {loading ? (\n//             <Loading />\n//           ) : comments?.length > 0 ? (\n//             comments?.map((comment) => (\n//               <div className='w-full py-2' key={comment?._id}>\n//                 <div className='flex gap-3 items-center mb-1'>\n//                   <Link to={\"/profile/\" + comment?.userId?._id}>\n//                     <img\n//                       src={comment?.userId?.profileUrl ?? NoProfile}\n//                       alt={comment?.userId?.firstName}\n//                       className='w-10 h-10 rounded-full object-cover'\n//                     />\n//                   </Link>\n//                   <div>\n//                     <Link to={\"/profile/\" + comment?.userId?._id}>\n//                       <p className='font-medium text-base text-ascent-1'>\n//                         {comment?.userId?.firstName} {comment?.userId?.lastName}\n//                       </p>\n//                     </Link>\n//                     <span className='text-ascent-2 text-sm'>\n//                       {moment(comment?.createdAt ?? \"2023-05-25\").fromNow()}\n//                     </span>\n//                   </div>\n//                 </div>\n\n//                 <div className='ml-12'>\n//                   <p className='text-ascent-2'>{comment?.comment}</p>\n\n//                   <div className='mt-2 flex gap-6'>\n//                     <p className='flex gap-2 items-center text-base text-ascent-2 cursor-pointer'>\n//                       {comment?.likes?.includes(user?._id) ? (\n//                         <BiSolidLike size={20} color='blue' />\n//                       ) : (\n//                         <BiLike size={20} />\n//                       )}\n//                       {comment?.likes?.length} Likes\n//                     </p>\n//                     <span\n//                       className='text-blue cursor-pointer'\n//                       onClick={() => setReplyComments(comment?._id)}\n//                     >\n//                       Reply\n//                     </span>\n//                   </div>\n\n//                   {replyComments === comment?._id && (\n//                     <CommentForm\n//                       user={user}\n//                       id={comment?._id}\n//                       replyAt={comment?.from}\n//                       getComments={() => getComments(post?._id)}\n//                     />\n//                   )}\n//                 </div>\n\n//                 {/* REPLIES */}\n\n//                 <div className='py-2 px-8 mt-6'>\n//                   {comment?.replies?.length > 0 && (\n//                     <p\n//                       className='text-base text-ascent-1 cursor-pointer'\n//                       onClick={() =>\n//                         setShowReply(\n//                           showReply === comment?.replies?._id\n//                             ? 0\n//                             : comment?.replies?._id\n//                         )\n//                       }\n//                     >\n//                       Show Replies ({comment?.replies?.length})\n//                     </p>\n//                   )}\n\n//                   {showReply === comment?.replies?._id &&\n//                     comment?.replies?.map((reply) => (\n//                       <ReplyCard\n//                         reply={reply}\n//                         user={user}\n//                         key={reply?._id}\n//                         handleLike={() =>\n//                           handleLike(\n//                             \"/posts/like-comment/\" +\n//                               comment?._id +\n//                               \"/\" +\n//                               reply?._id\n//                           )\n//                         }\n//                       />\n//                     ))}\n//                 </div>\n//               </div>\n//             ))\n//           ) : (\n//             <span className='flex text-sm py-4 text-ascent-2 text-center'>\n//               No Comments, be first to comment\n//             </span>\n//           )}\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n\n// export default PostCard;\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { NoProfile } from \"../assets\";\nimport { BiComment, BiLike, BiShare, BiSolidLike } from \"react-icons/bi\";\nimport { MdOutlineDeleteOutline } from \"react-icons/md\";\nimport Loading from \"./Loading\";\nimport { useForm } from \"react-hook-form\";\nimport TextInput from \"./TextInput\";\nimport CustomButton from \"./CustomButton\";\nimport { getCommentsAPI } from \"../api/PostAPI\";\nimport { useDispatch } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReplyCard = ({\n  reply,\n  user,\n  handleLike\n}) => {\n  var _reply$userId, _reply$userId$profile, _reply$userId2, _reply$userId3, _reply$userId4, _reply$userId5, _reply$userId6, _reply$likes, _reply$likes2;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full py-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-3 items-center mb-1\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/profile/\" + (reply === null || reply === void 0 ? void 0 : (_reply$userId = reply.userId) === null || _reply$userId === void 0 ? void 0 : _reply$userId._id),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: (_reply$userId$profile = reply === null || reply === void 0 ? void 0 : (_reply$userId2 = reply.userId) === null || _reply$userId2 === void 0 ? void 0 : _reply$userId2.profileUrl) !== null && _reply$userId$profile !== void 0 ? _reply$userId$profile : NoProfile,\n          alt: reply === null || reply === void 0 ? void 0 : (_reply$userId3 = reply.userId) === null || _reply$userId3 === void 0 ? void 0 : _reply$userId3.firstName,\n          className: \"w-10 h-10 rounded-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/profile/\" + (reply === null || reply === void 0 ? void 0 : (_reply$userId4 = reply.userId) === null || _reply$userId4 === void 0 ? void 0 : _reply$userId4._id),\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium text-base text-ascent-1\",\n            children: [reply === null || reply === void 0 ? void 0 : (_reply$userId5 = reply.userId) === null || _reply$userId5 === void 0 ? void 0 : _reply$userId5.firstName, \" \", reply === null || reply === void 0 ? void 0 : (_reply$userId6 = reply.userId) === null || _reply$userId6 === void 0 ? void 0 : _reply$userId6.lastName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-ascent-2 text-sm\",\n          children: moment(reply === null || reply === void 0 ? void 0 : reply.createdAt).fromNow()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-ascent-2 \",\n        children: reply === null || reply === void 0 ? void 0 : reply.comment\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 flex gap-6\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"flex gap-2 items-center text-base text-ascent-2 cursor-pointer\",\n          onClick: handleLike,\n          children: [reply !== null && reply !== void 0 && (_reply$likes = reply.likes) !== null && _reply$likes !== void 0 && _reply$likes.includes(user === null || user === void 0 ? void 0 : user._id) ? /*#__PURE__*/_jsxDEV(BiSolidLike, {\n            size: 20,\n            color: \"blue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(BiLike, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), reply === null || reply === void 0 ? void 0 : (_reply$likes2 = reply.likes) === null || _reply$likes2 === void 0 ? void 0 : _reply$likes2.length, \" Likes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 362,\n    columnNumber: 5\n  }, this);\n};\n_c = ReplyCard;\nconst CommentForm = ({\n  user,\n  id,\n  replyAt,\n  getComments\n}) => {\n  _s();\n  var _user$profileUrl;\n  const [loading, setLoading] = useState(false);\n  const [errMsg, setErrMsg] = useState(\"\");\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: {\n      errors\n    }\n  } = useForm({\n    mode: \"onChange\"\n  });\n  const onSubmit = async data => {};\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: \"w-full border-b border-[#66666645]\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full flex items-center gap-2 py-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: (_user$profileUrl = user === null || user === void 0 ? void 0 : user.profileUrl) !== null && _user$profileUrl !== void 0 ? _user$profileUrl : NoProfile,\n        alt: \"User Image\",\n        className: \"w-10 h-10 rounded-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        name: \"comment\",\n        styles: \"w-full rounded-full py-3\",\n        placeholder: replyAt ? `Reply @${replyAt}` : \"Comment this post\",\n        register: register(\"comment\", {\n          required: \"Comment can not be empty\"\n        }),\n        error: errors.comment ? errors.comment.message : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this), (errMsg === null || errMsg === void 0 ? void 0 : errMsg.message) && /*#__PURE__*/_jsxDEV(\"span\", {\n      role: \"alert\",\n      className: `text-sm ${(errMsg === null || errMsg === void 0 ? void 0 : errMsg.status) === \"failed\" ? \"text-[#f64949fe]\" : \"text-[#2ba150fe]\"} mt-0.5`,\n      children: errMsg === null || errMsg === void 0 ? void 0 : errMsg.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-end justify-end pb-2\",\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(CustomButton, {\n        title: \"Submit\",\n        type: \"submit\",\n        containerStyles: \"bg-[#0444a4] text-white py-1 px-3 rounded-full font-semibold text-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 419,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentForm, \"rDFj6BQnV1BsOivJTRPbl66jQ4I=\", false, function () {\n  return [useForm];\n});\n_c2 = CommentForm;\nconst PostCard = ({\n  post,\n  user,\n  deletePost,\n  likePost\n}) => {\n  _s2();\n  var _post$content, _post$content2, _post$likes, _post$userId;\n  const [showAll, setShowAll] = useState(0);\n  const [showReply, setShowReply] = useState(0);\n  const [comments, setComments] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [replyComments, setReplyComments] = useState(0);\n  const [showComments, setShowComments] = useState(0);\n  const [error, setError] = useState(null);\n  const postId = post.postId;\n  useEffect(() => {\n    const fetchInitialComments = async () => {\n      setLoading(true);\n      try {\n        const response = await getCommentsAPI(postId);\n        setComments(response.data || []); // Giả sử API trả về thẳng mảng\n      } catch (err) {\n        setError(\"Không thể tải bình luận\");\n        console.error(\"Lỗi fetch comments:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchInitialComments();\n  }, [postId]);\n  const getComments = async () => {\n    // Toggle hiển thị comments\n    const willShow = showComments !== postId;\n    setShowComments(willShow ? postId : null);\n    // Chỉ fetch khi cần hiển thị và chưa có comments\n    if (willShow && comments.length === 0) {\n      setLoading(true);\n      try {\n        const response = await getCommentsAPI(postId);\n        setComments(response.data || []);\n        setShowComments(postId);\n      } catch (err) {\n        console.error(\"Lỗi khi lấy bình luận:\", err);\n        setError(\"Không thể tải bình luận\");\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    // setComments(postComments);a\n  };\n  // Kiểm tra dữ liệu trước khi render\n  if (!post) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-2 bg-primary p-4 rounded-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-3 items-center mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/profile/${post.userId}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: (user === null || user === void 0 ? void 0 : user.profileImage) || NoProfile,\n          alt: user === null || user === void 0 ? void 0 : user.username,\n          className: \"w-14 h-14 object-cover rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full flex justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/profile/${post.userId}`,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium text-lg text-ascent-1\",\n              children: user === null || user === void 0 ? void 0 : user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-ascent-2\",\n            children: user === null || user === void 0 ? void 0 : user.country\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-ascent-2\",\n          children: moment(post.timestamp).fromNow()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-ascent-2\",\n        children: [showAll ? post.content : (_post$content = post.content) === null || _post$content === void 0 ? void 0 : _post$content.slice(0, 100), ((_post$content2 = post.content) === null || _post$content2 === void 0 ? void 0 : _post$content2.length) > 100 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-blue ml-2 font-medium cursor-pointer\",\n          onClick: () => setShowAll(!showAll),\n          children: showAll ? \"Show Less\" : \"...Show More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this), (post === null || post === void 0 ? void 0 : post.mediaURL) && (post.mediaURL.endsWith('.mp4') || post.mediaURL.endsWith('.wav') ? /*#__PURE__*/_jsxDEV(\"video\", {\n        controls: true,\n        className: \"w-full mt-2 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"source\", {\n          src: post.mediaURL,\n          type: \"video/mp4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }, this), \"Your browser does not support the video tag.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n        src: post.mediaURL,\n        alt: \"post media\",\n        className: \"w-full mt-2 rounded-lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex justify-between items-center px-3 py-2 text-ascent-2\\r text-base border-t border-[#66666645]\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex gap-2 items-center text-base cursor-pointer\",\n        onClick: likePost,\n        children: [post !== null && post !== void 0 && (_post$likes = post.likes) !== null && _post$likes !== void 0 && _post$likes.some(like => like.userId === (user === null || user === void 0 ? void 0 : user.userId) && like.postId === post.postId) ? /*#__PURE__*/_jsxDEV(BiSolidLike, {\n          size: 20,\n          color: \"blue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(BiLike, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 13\n        }, this), post === null || post === void 0 ? void 0 : post.likeCount, \" Likes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex gap-2 items-center text-base cursor-pointer\",\n        onClick: () => {\n          getComments();\n        },\n        children: [/*#__PURE__*/_jsxDEV(BiComment, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 11\n        }, this), post === null || post === void 0 ? void 0 : post.commentCount, \" Comments\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex gap-2 items-center text-base cursor-pointer\"\n        // onClick={() => sharePost(post?._id)}\n        ,\n        children: [/*#__PURE__*/_jsxDEV(BiShare, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Share\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user._id) === (post === null || post === void 0 ? void 0 : (_post$userId = post.userId) === null || _post$userId === void 0 ? void 0 : _post$userId._id) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-1 items-center text-base text-ascent-1 cursor-pointer\",\n        onClick: () => deletePost(post === null || post === void 0 ? void 0 : post._id),\n        children: [/*#__PURE__*/_jsxDEV(MdOutlineDeleteOutline, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 7\n    }, this), showComments === postId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full mt-4 border-t border-[#66666645] pt-4 \",\n      children: [/*#__PURE__*/_jsxDEV(CommentForm, {\n        user: user,\n        id: postId,\n        getComments: getComments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 11\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 13\n      }, this) : (comments === null || comments === void 0 ? void 0 : comments.length) > 0 ? comments.map(comment => {\n        var _comment$userId, _comment$userId$profi, _comment$userId2, _comment$userId3, _comment$userId4, _comment$userId5, _comment$userId6, _comment$timestamp, _comment$likes, _comment$likes2, _comment$replies, _comment$replies4, _comment$replies5, _comment$replies6;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full py-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3 items-center mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/profile/\" + (comment === null || comment === void 0 ? void 0 : (_comment$userId = comment.userId) === null || _comment$userId === void 0 ? void 0 : _comment$userId.userId),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: (_comment$userId$profi = comment === null || comment === void 0 ? void 0 : (_comment$userId2 = comment.userId) === null || _comment$userId2 === void 0 ? void 0 : _comment$userId2.profileUrl) !== null && _comment$userId$profi !== void 0 ? _comment$userId$profi : NoProfile,\n                alt: comment === null || comment === void 0 ? void 0 : (_comment$userId3 = comment.userId) === null || _comment$userId3 === void 0 ? void 0 : _comment$userId3.firstName,\n                className: \"w-10 h-10 rounded-full object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/profile/\" + (comment === null || comment === void 0 ? void 0 : (_comment$userId4 = comment.userId) === null || _comment$userId4 === void 0 ? void 0 : _comment$userId4.userId),\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium text-base text-ascent-1\",\n                  children: [comment === null || comment === void 0 ? void 0 : (_comment$userId5 = comment.userId) === null || _comment$userId5 === void 0 ? void 0 : _comment$userId5.firstName, \" \", comment === null || comment === void 0 ? void 0 : (_comment$userId6 = comment.userId) === null || _comment$userId6 === void 0 ? void 0 : _comment$userId6.lastName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-ascent-2 text-sm\",\n                children: moment((_comment$timestamp = comment === null || comment === void 0 ? void 0 : comment.timestamp) !== null && _comment$timestamp !== void 0 ? _comment$timestamp : \"2023-05-25\").fromNow()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-ascent-2\",\n              children: comment === null || comment === void 0 ? void 0 : comment.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"flex gap-2 items-center text-base text-ascent-2 cursor-pointer\",\n                children: [comment !== null && comment !== void 0 && (_comment$likes = comment.likes) !== null && _comment$likes !== void 0 && _comment$likes.includes(user === null || user === void 0 ? void 0 : user._id) ? /*#__PURE__*/_jsxDEV(BiSolidLike, {\n                  size: 20,\n                  color: \"blue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(BiLike, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 667,\n                  columnNumber: 25\n                }, this), comment === null || comment === void 0 ? void 0 : (_comment$likes2 = comment.likes) === null || _comment$likes2 === void 0 ? void 0 : _comment$likes2.length, \" Likes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue cursor-pointer\",\n                onClick: () => setReplyComments(comment === null || comment === void 0 ? void 0 : comment._id),\n                children: \"Reply\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 19\n            }, this), replyComments === (comment === null || comment === void 0 ? void 0 : comment._id) && /*#__PURE__*/_jsxDEV(CommentForm, {\n              user: user,\n              id: comment === null || comment === void 0 ? void 0 : comment._id,\n              replyAt: comment === null || comment === void 0 ? void 0 : comment.from,\n              getComments: () => getComments(post === null || post === void 0 ? void 0 : post._id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"py-2 px-8 mt-6\",\n            children: [(comment === null || comment === void 0 ? void 0 : (_comment$replies = comment.replies) === null || _comment$replies === void 0 ? void 0 : _comment$replies.length) > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-base text-ascent-1 cursor-pointer\",\n              onClick: () => {\n                var _comment$replies2, _comment$replies3;\n                return setShowReply(showReply === (comment === null || comment === void 0 ? void 0 : (_comment$replies2 = comment.replies) === null || _comment$replies2 === void 0 ? void 0 : _comment$replies2._id) ? 0 : comment === null || comment === void 0 ? void 0 : (_comment$replies3 = comment.replies) === null || _comment$replies3 === void 0 ? void 0 : _comment$replies3._id);\n              },\n              children: [\"Show Replies (\", comment === null || comment === void 0 ? void 0 : (_comment$replies4 = comment.replies) === null || _comment$replies4 === void 0 ? void 0 : _comment$replies4.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 21\n            }, this), showReply === (comment === null || comment === void 0 ? void 0 : (_comment$replies5 = comment.replies) === null || _comment$replies5 === void 0 ? void 0 : _comment$replies5._id) && (comment === null || comment === void 0 ? void 0 : (_comment$replies6 = comment.replies) === null || _comment$replies6 === void 0 ? void 0 : _comment$replies6.map(reply => /*#__PURE__*/_jsxDEV(ReplyCard, {\n              reply: reply,\n              user: user\n            }, reply === null || reply === void 0 ? void 0 : reply._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 23\n            }, this)))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 17\n          }, this)]\n        }, comment === null || comment === void 0 ? void 0 : comment.commentId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 15\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"flex text-sm py-4 text-ascent-2 text-center\",\n        children: \"No Comments, be first to comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 524,\n    columnNumber: 5\n  }, this);\n};\n_s2(PostCard, \"323L4Y7QTn3iglaJ2qF5qtQtIrc=\");\n_c3 = PostCard;\nexport default PostCard;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ReplyCard\");\n$RefreshReg$(_c2, \"CommentForm\");\n$RefreshReg$(_c3, \"PostCard\");","map":{"version":3,"names":["React","useEffect","useState","Link","moment","NoProfile","BiComment","BiLike","BiShare","BiSolidLike","MdOutlineDeleteOutline","Loading","useForm","TextInput","CustomButton","getCommentsAPI","useDispatch","jsxDEV","_jsxDEV","ReplyCard","reply","user","handleLike","_reply$userId","_reply$userId$profile","_reply$userId2","_reply$userId3","_reply$userId4","_reply$userId5","_reply$userId6","_reply$likes","_reply$likes2","className","children","to","userId","_id","src","profileUrl","alt","firstName","fileName","_jsxFileName","lineNumber","columnNumber","lastName","createdAt","fromNow","comment","onClick","likes","includes","size","color","length","_c","CommentForm","id","replyAt","getComments","_s","_user$profileUrl","loading","setLoading","errMsg","setErrMsg","register","handleSubmit","reset","formState","errors","mode","onSubmit","data","name","styles","placeholder","required","error","message","role","status","title","type","containerStyles","_c2","PostCard","post","deletePost","likePost","_s2","_post$content","_post$content2","_post$likes","_post$userId","showAll","setShowAll","showReply","setShowReply","comments","setComments","replyComments","setReplyComments","showComments","setShowComments","setError","postId","fetchInitialComments","response","err","console","willShow","profileImage","username","country","timestamp","content","slice","mediaURL","endsWith","controls","some","like","likeCount","commentCount","map","_comment$userId","_comment$userId$profi","_comment$userId2","_comment$userId3","_comment$userId4","_comment$userId5","_comment$userId6","_comment$timestamp","_comment$likes","_comment$likes2","_comment$replies","_comment$replies4","_comment$replies5","_comment$replies6","from","replies","_comment$replies2","_comment$replies3","commentId","_c3","$RefreshReg$"],"sources":["D:/code/XDPMTMHPL/doan/FE_SocialMedia-main/src/components/PostCard.jsx"],"sourcesContent":["// import React, { useState } from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\n// import moment from \"moment\";\r\n// import { NoProfile } from \"../assets\";\r\n// import { BiComment, BiLike, BiSolidLike } from \"react-icons/bi\";\r\n// import { MdOutlineDeleteOutline } from \"react-icons/md\";\r\n// import { useForm } from \"react-hook-form\";\r\n// import TextInput from \"./TextInput\";\r\n// import Loading from \"./Loading\";\r\n// import CustomButton from \"./CustomButton\";\r\n// // import { postComments } from \"../assets/data\";\r\n\r\n// const ReplyCard = ({ reply, user, handleLike }) => {\r\n//   return (\r\n//     <div className='w-full py-3'>\r\n//       <div className='flex gap-3 items-center mb-1'>\r\n//         <Link to={\"/profile/\" + reply?.userId?._id}>\r\n//           <img\r\n//             src={reply?.userId?.profileUrl ?? NoProfile}\r\n//             alt={reply?.userId?.firstName}\r\n//             className='w-10 h-10 rounded-full object-cover'\r\n//           />\r\n//         </Link>\r\n\r\n//         <div>\r\n//           <Link to={\"/profile/\" + reply?.userId?._id}>\r\n//             <p className='font-medium text-base text-ascent-1'>\r\n//               {reply?.userId?.firstName} {reply?.userId?.lastName}\r\n//             </p>\r\n//           </Link>\r\n//           <span className='text-ascent-2 text-sm'>\r\n//             {moment(reply?.createdAt).fromNow()}\r\n//           </span>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div className='ml-12'>\r\n//         <p className='text-ascent-2 '>{reply?.comment}</p>\r\n//         <div className='mt-2 flex gap-6'>\r\n//           <p\r\n//             className='flex gap-2 items-center text-base text-ascent-2 cursor-pointer'\r\n//             onClick={handleLike}\r\n//           >\r\n//             {reply?.likes?.includes(user?._id) ? (\r\n//               <BiSolidLike size={20} color='blue' />\r\n//             ) : (\r\n//               <BiLike size={20} />\r\n//             )}\r\n//             {reply?.likes?.length} Likes\r\n//           </p>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// const CommentForm = ({ user, id, replyAt, getComments }) => {\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [errMsg, setErrMsg] = useState(\"\");\r\n//   const {\r\n//     register,\r\n//     handleSubmit,\r\n//     reset,\r\n//     formState: { errors },\r\n//   } = useForm({\r\n//     mode: \"onChange\",\r\n//   });\r\n\r\n//   const onSubmit = async (data) => {};\r\n\r\n//   return (\r\n//     <form\r\n//       onSubmit={handleSubmit(onSubmit)}\r\n//       className='w-full border-b border-[#66666645]'\r\n//     >\r\n//       <div className='w-full flex items-center gap-2 py-4'>\r\n//         <img\r\n//           src={user?.profileUrl ?? NoProfile}\r\n//           alt='User Image'\r\n//           className='w-10 h-10 rounded-full object-cover'\r\n//         />\r\n\r\n//         <TextInput\r\n//           name='comment'\r\n//           styles='w-full rounded-full py-3'\r\n//           placeholder={replyAt ? `Reply @${replyAt}` : \"Comment this post\"}\r\n//           register={register(\"comment\", {\r\n//             required: \"Comment can not be empty\",\r\n//           })}\r\n//           error={errors.comment ? errors.comment.message : \"\"}\r\n//         />\r\n//       </div>\r\n//       {errMsg?.message && (\r\n//         <span\r\n//           role='alert'\r\n//           className={`text-sm ${\r\n//             errMsg?.status === \"failed\"\r\n//               ? \"text-[#f64949fe]\"\r\n//               : \"text-[#2ba150fe]\"\r\n//           } mt-0.5`}\r\n//         >\r\n//           {errMsg?.message}\r\n//         </span>\r\n//       )}\r\n\r\n//       <div className='flex items-end justify-end pb-2'>\r\n//         {loading ? (\r\n//           <Loading />\r\n//         ) : (\r\n//           <CustomButton\r\n//             title='Submit'\r\n//             type='submit'\r\n//             containerStyles='bg-[#0444a4] text-white py-1 px-3 rounded-full font-semibold text-sm'\r\n//           />\r\n//         )}\r\n//       </div>\r\n//     </form>\r\n//   );\r\n// };\r\n\r\n// const PostCard = ({ post, user, deletePost, likePost }) => {\r\n//   const [showAll, setShowAll] = useState(0);\r\n//   const [showReply, setShowReply] = useState(0);\r\n//   const [comments, setComments] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [replyComments, setReplyComments] = useState(0);\r\n//   const [showComments, setShowComments] = useState(0);\r\n//   const getComments = async () => {\r\n//     setReplyComments(0);\r\n\r\n//     // setComments(postComments);\r\n//     setLoading(false);\r\n//   };\r\n//   const handleLike = async () => {};\r\n\r\n//   return (\r\n//     <div className='mb-2 bg-primary p-4 rounded-xl'>\r\n//       <div className='flex gap-3 items-center mb-2'>\r\n//         <Link to={\"/profile/\" + post?.userId?._id}>\r\n//           <img\r\n//             src={post?.userId?.profileUrl ?? NoProfile}\r\n//             alt={post?.userId?.firstName}\r\n//             className='w-14 h-14 object-cover rounded-full'\r\n//           />\r\n//         </Link>\r\n\r\n//         <div className='w-full flex justify-between'>\r\n//           <div className=''>\r\n//             <Link to={\"/profile/\" + post?.userId}>\r\n//               <p className='font-medium text-lg text-ascent-1'>\r\n//                 {post?.userId?.firstName} {post?.userId?.username}\r\n//               </p>\r\n//             </Link>\r\n//             <span className='text-ascent-2'>{post?.userId?.location}</span>\r\n//           </div>\r\n\r\n//           <span className='text-ascent-2'>\r\n//             {moment(post?.createdAt ?? \"2023-05-25\").fromNow()}\r\n//           </span>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div>\r\n//         <p className='text-ascent-2'>\r\n//           {showAll === post?._id\r\n//             ? post?.description\r\n            \r\n//             : post?.description.slice(0, 300)}\r\n\r\n//           {post?.description?.length > 301 &&\r\n//             (showAll === post?._id ? (\r\n//               <span\r\n//                 className='text-blue ml-2 font-mediu cursor-pointer'\r\n//                 onClick={() => setShowAll(0)}\r\n//               >\r\n//                 Show Less\r\n//               </span>\r\n//             ) : (\r\n//               <span\r\n//                 className='text-blue ml-2 font-medium cursor-pointer'\r\n//                 onClick={() => setShowAll(post?._id)}\r\n//               >\r\n//                 Show More\r\n//               </span>\r\n//             ))}\r\n//         </p>\r\n\r\n//         {post?.image && (\r\n//           <img\r\n//             src={post?.image}\r\n//             alt='post image'\r\n//             className='w-full mt-2 rounded-lg'\r\n//           />\r\n//         )}\r\n//       </div>\r\n\r\n//       <div\r\n//         className='mt-4 flex justify-between items-center px-3 py-2 text-ascent-2\r\n//       text-base border-t border-[#66666645]'\r\n//       >\r\n//         <p className='flex gap-2 items-center text-base cursor-pointer'>\r\n//           {post?.likes?.includes(user?._id) ? (\r\n//             <BiSolidLike size={20} color='blue' />\r\n//           ) : (\r\n//             <BiLike size={20} />\r\n//           )}\r\n//           {post?.likes?.length} Likes\r\n//         </p>\r\n\r\n//         <p\r\n//           className='flex gap-2 items-center text-base cursor-pointer'\r\n//           onClick={() => {\r\n//             setShowComments(showComments === post._id ? null : post._id);\r\n//             getComments(post?._id);\r\n//           }}\r\n//         >\r\n//           <BiComment size={20} />\r\n//           {post?.comments?.length} Comments\r\n//         </p>\r\n\r\n//         {user?._id === post?.userId?._id && (\r\n//           <div\r\n//             className='flex gap-1 items-center text-base text-ascent-1 cursor-pointer'\r\n//             onClick={() => deletePost(post?._id)}\r\n//           >\r\n//             <MdOutlineDeleteOutline size={20} />\r\n//             <span>Delete</span>\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {/* COMMENTS */}\r\n//       {showComments === post?._id && (\r\n//         <div className='w-full mt-4 border-t border-[#66666645] pt-4 '>\r\n//           <CommentForm\r\n//             user={user}\r\n//             id={post?._id}\r\n//             getComments={() => getComments(post?._id)}\r\n//           />\r\n\r\n//           {loading ? (\r\n//             <Loading />\r\n//           ) : comments?.length > 0 ? (\r\n//             comments?.map((comment) => (\r\n//               <div className='w-full py-2' key={comment?._id}>\r\n//                 <div className='flex gap-3 items-center mb-1'>\r\n//                   <Link to={\"/profile/\" + comment?.userId?._id}>\r\n//                     <img\r\n//                       src={comment?.userId?.profileUrl ?? NoProfile}\r\n//                       alt={comment?.userId?.firstName}\r\n//                       className='w-10 h-10 rounded-full object-cover'\r\n//                     />\r\n//                   </Link>\r\n//                   <div>\r\n//                     <Link to={\"/profile/\" + comment?.userId?._id}>\r\n//                       <p className='font-medium text-base text-ascent-1'>\r\n//                         {comment?.userId?.firstName} {comment?.userId?.lastName}\r\n//                       </p>\r\n//                     </Link>\r\n//                     <span className='text-ascent-2 text-sm'>\r\n//                       {moment(comment?.createdAt ?? \"2023-05-25\").fromNow()}\r\n//                     </span>\r\n//                   </div>\r\n//                 </div>\r\n\r\n//                 <div className='ml-12'>\r\n//                   <p className='text-ascent-2'>{comment?.comment}</p>\r\n\r\n//                   <div className='mt-2 flex gap-6'>\r\n//                     <p className='flex gap-2 items-center text-base text-ascent-2 cursor-pointer'>\r\n//                       {comment?.likes?.includes(user?._id) ? (\r\n//                         <BiSolidLike size={20} color='blue' />\r\n//                       ) : (\r\n//                         <BiLike size={20} />\r\n//                       )}\r\n//                       {comment?.likes?.length} Likes\r\n//                     </p>\r\n//                     <span\r\n//                       className='text-blue cursor-pointer'\r\n//                       onClick={() => setReplyComments(comment?._id)}\r\n//                     >\r\n//                       Reply\r\n//                     </span>\r\n//                   </div>\r\n\r\n//                   {replyComments === comment?._id && (\r\n//                     <CommentForm\r\n//                       user={user}\r\n//                       id={comment?._id}\r\n//                       replyAt={comment?.from}\r\n//                       getComments={() => getComments(post?._id)}\r\n//                     />\r\n//                   )}\r\n//                 </div>\r\n\r\n//                 {/* REPLIES */}\r\n\r\n//                 <div className='py-2 px-8 mt-6'>\r\n//                   {comment?.replies?.length > 0 && (\r\n//                     <p\r\n//                       className='text-base text-ascent-1 cursor-pointer'\r\n//                       onClick={() =>\r\n//                         setShowReply(\r\n//                           showReply === comment?.replies?._id\r\n//                             ? 0\r\n//                             : comment?.replies?._id\r\n//                         )\r\n//                       }\r\n//                     >\r\n//                       Show Replies ({comment?.replies?.length})\r\n//                     </p>\r\n//                   )}\r\n\r\n//                   {showReply === comment?.replies?._id &&\r\n//                     comment?.replies?.map((reply) => (\r\n//                       <ReplyCard\r\n//                         reply={reply}\r\n//                         user={user}\r\n//                         key={reply?._id}\r\n//                         handleLike={() =>\r\n//                           handleLike(\r\n//                             \"/posts/like-comment/\" +\r\n//                               comment?._id +\r\n//                               \"/\" +\r\n//                               reply?._id\r\n//                           )\r\n//                         }\r\n//                       />\r\n//                     ))}\r\n//                 </div>\r\n//               </div>\r\n//             ))\r\n//           ) : (\r\n//             <span className='flex text-sm py-4 text-ascent-2 text-center'>\r\n//               No Comments, be first to comment\r\n//             </span>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default PostCard;\r\n\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { NoProfile } from \"../assets\";\r\nimport { BiComment, BiLike, BiShare, BiSolidLike } from \"react-icons/bi\";\r\nimport { MdOutlineDeleteOutline } from \"react-icons/md\";\r\nimport Loading from \"./Loading\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport TextInput from \"./TextInput\";\r\nimport CustomButton from \"./CustomButton\";\r\nimport { getCommentsAPI } from \"../api/PostAPI\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst ReplyCard = ({ reply, user, handleLike }) => {\r\n  return (\r\n    <div className='w-full py-3'>\r\n      <div className='flex gap-3 items-center mb-1'>\r\n        <Link to={\"/profile/\" + reply?.userId?._id}>\r\n          <img\r\n            src={reply?.userId?.profileUrl ?? NoProfile}\r\n            alt={reply?.userId?.firstName}\r\n            className='w-10 h-10 rounded-full object-cover'\r\n          />\r\n        </Link>\r\n\r\n        <div>\r\n          <Link to={\"/profile/\" + reply?.userId?._id}>\r\n            <p className='font-medium text-base text-ascent-1'>\r\n              {reply?.userId?.firstName} {reply?.userId?.lastName}\r\n            </p>\r\n          </Link>\r\n          <span className='text-ascent-2 text-sm'>\r\n            {moment(reply?.createdAt).fromNow()}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className='ml-12'>\r\n        <p className='text-ascent-2 '>{reply?.comment}</p>\r\n        <div className='mt-2 flex gap-6'>\r\n          <p\r\n            className='flex gap-2 items-center text-base text-ascent-2 cursor-pointer'\r\n            onClick={handleLike}\r\n          >\r\n            {reply?.likes?.includes(user?._id) ? (\r\n              <BiSolidLike size={20} color='blue' />\r\n            ) : (\r\n              <BiLike size={20} />\r\n            )}\r\n            {reply?.likes?.length} Likes\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst CommentForm = ({ user, id, replyAt, getComments }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [errMsg, setErrMsg] = useState(\"\");\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  const onSubmit = async (data) => {};\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit(onSubmit)}\r\n      className='w-full border-b border-[#66666645]'\r\n    >\r\n      <div className='w-full flex items-center gap-2 py-4'>\r\n        <img\r\n          src={user?.profileUrl ?? NoProfile}\r\n          alt='User Image'\r\n          className='w-10 h-10 rounded-full object-cover'\r\n        />\r\n\r\n        <TextInput\r\n          name='comment'\r\n          styles='w-full rounded-full py-3'\r\n          placeholder={replyAt ? `Reply @${replyAt}` : \"Comment this post\"}\r\n          register={register(\"comment\", {\r\n            required: \"Comment can not be empty\",\r\n          })}\r\n          error={errors.comment ? errors.comment.message : \"\"}\r\n        />\r\n      </div>\r\n      {errMsg?.message && (\r\n        <span\r\n          role='alert'\r\n          className={`text-sm ${\r\n            errMsg?.status === \"failed\"\r\n              ? \"text-[#f64949fe]\"\r\n              : \"text-[#2ba150fe]\"\r\n          } mt-0.5`}\r\n        >\r\n          {errMsg?.message}\r\n        </span>\r\n      )}\r\n\r\n      <div className='flex items-end justify-end pb-2'>\r\n        {loading ? (\r\n          <Loading />\r\n        ) : (\r\n          <CustomButton\r\n            title='Submit'\r\n            type='submit'\r\n            containerStyles='bg-[#0444a4] text-white py-1 px-3 rounded-full font-semibold text-sm'\r\n          />\r\n        )}\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\n\r\nconst PostCard = ({ post, user, deletePost, likePost }) => {\r\n  const [showAll, setShowAll] = useState(0);\r\n  const [showReply, setShowReply] = useState(0);\r\n  const [comments, setComments] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [replyComments, setReplyComments] = useState(0);\r\n  const [showComments, setShowComments] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const postId = post.postId;\r\n  useEffect(()=>{\r\n    const fetchInitialComments = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await getCommentsAPI(postId);\r\n      setComments(response.data || []); // Giả sử API trả về thẳng mảng\r\n    } catch (err) {\r\n      setError(\"Không thể tải bình luận\");\r\n      console.error(\"Lỗi fetch comments:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  fetchInitialComments();\r\n  }, [postId]\r\n);\r\n\r\n  const getComments = async () => {\r\n  // Toggle hiển thị comments\r\n  const willShow = showComments !== postId;\r\n  setShowComments(willShow ? postId : null);\r\n  // Chỉ fetch khi cần hiển thị và chưa có comments\r\n  if (willShow && comments.length === 0) {\r\n    setLoading(true);\r\n    \r\n    try{\r\n      const response = await getCommentsAPI(postId);\r\n      setComments(response.data || []);\r\n      setShowComments(postId);\r\n    }catch(err){\r\n      console.error(\"Lỗi khi lấy bình luận:\", err);\r\n      setError(\"Không thể tải bình luận\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n    // setComments(postComments);a\r\n    \r\n  };\r\n  // Kiểm tra dữ liệu trước khi render\r\n  if (!post) return null;\r\n\r\n  \r\n\r\n  return (\r\n    <div className='mb-2 bg-primary p-4 rounded-xl'>\r\n      {/* Phần header */}\r\n      <div className='flex gap-3 items-center mb-2'>\r\n        <Link to={`/profile/${post.userId}`}>\r\n          <img\r\n            src={user?.profileImage || NoProfile}\r\n            alt={user?.username}\r\n            className='w-14 h-14 object-cover rounded-full'\r\n          />\r\n        </Link>\r\n\r\n        <div className='w-full flex justify-between'>\r\n          <div>\r\n            <Link to={`/profile/${post.userId}`}>\r\n              <p className='font-medium text-lg text-ascent-1'>\r\n                {user?.username}\r\n              </p>\r\n            </Link>\r\n            <span className='text-ascent-2'>{user?.country}</span>\r\n          </div>\r\n          <span className='text-ascent-2'>\r\n            {moment(post.timestamp).fromNow()}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Nội dung bài viết */}\r\n      <div>\r\n        <p className='text-ascent-2'>\r\n          {showAll ? post.content : post.content?.slice(0, 100)}\r\n          {post.content?.length > 100 && (\r\n            <span\r\n              className='text-blue ml-2 font-medium cursor-pointer'\r\n              onClick={() => setShowAll(!showAll)}\r\n            >\r\n              {showAll ? \"Show Less\" : \"...Show More\"}\r\n            </span>\r\n          )}\r\n        </p>\r\n        {post?.mediaURL && (\r\n        post.mediaURL.endsWith('.mp4') || post.mediaURL.endsWith('.wav') ? (\r\n          <video controls className='w-full mt-2 rounded-lg'>\r\n            <source src={post.mediaURL} type=\"video/mp4\" />\r\n            Your browser does not support the video tag.\r\n          </video>\r\n        ) : (\r\n          <img\r\n            src={post.mediaURL}\r\n            alt='post media'\r\n            className='w-full mt-2 rounded-lg'\r\n          />\r\n        )\r\n      )}\r\n\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div\r\n        className='mt-4 flex justify-between items-center px-3 py-2 text-ascent-2\r\n      text-base border-t border-[#66666645]'\r\n      >\r\n        {/* Nút Like */}\r\n        <p className='flex gap-2 items-center text-base cursor-pointer' onClick={likePost}>\r\n          {post?.likes?.some(like => \r\n            like.userId === user?.userId && like.postId === post.postId\r\n          ) ? (\r\n            <BiSolidLike size={20} color='blue' />\r\n          ) : (\r\n            <BiLike size={20} />\r\n          )}\r\n          {post?.likeCount} Likes\r\n        </p>\r\n          {/* Nút Comment */}\r\n        <p\r\n          className='flex gap-2 items-center text-base cursor-pointer'\r\n          onClick={() => {\r\n            getComments();\r\n          }}\r\n        >\r\n          <BiComment size={20} />\r\n          {post?.commentCount} Comments\r\n        </p>\r\n        {/* Nút Share */}\r\n        <p\r\n            className='flex gap-2 items-center text-base cursor-pointer'\r\n            // onClick={() => sharePost(post?._id)}\r\n          >\r\n            <BiShare size={20} />\r\n            <span>Share</span>\r\n          </p>\r\n        {/* Nút Delete (chỉ hiển thị nếu user là chủ bài viết) */}\r\n        {user?._id === post?.userId?._id && (\r\n          <div\r\n            className='flex gap-1 items-center text-base text-ascent-1 cursor-pointer'\r\n            onClick={() => deletePost(post?._id)}\r\n          >\r\n            <MdOutlineDeleteOutline size={20} />\r\n            <span>Delete</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* COMMENTS */}\r\n       {showComments === postId && (\r\n        <div className='w-full mt-4 border-t border-[#66666645] pt-4 '>\r\n          <CommentForm\r\n            user={user}\r\n            id={postId}\r\n            getComments={getComments}\r\n          />\r\n          {/* danh sách comment*/ }\r\n          {loading ? (\r\n            <Loading />\r\n          ) : comments?.length > 0 ? (\r\n            comments.map((comment) => (\r\n              <div className='w-full py-2' key={comment?.commentId}>\r\n                <div className='flex gap-3 items-center mb-1'>\r\n                  <Link to={\"/profile/\" + comment?.userId?.userId}>\r\n                    <img\r\n                      src={comment?.userId?.profileUrl ?? NoProfile}\r\n                      alt={comment?.userId?.firstName}\r\n                      className='w-10 h-10 rounded-full object-cover'\r\n                    />\r\n                  </Link>\r\n                  <div>\r\n                    <Link to={\"/profile/\" + comment?.userId?.userId}>\r\n                      <p className='font-medium text-base text-ascent-1'>\r\n                        {comment?.userId?.firstName} {comment?.userId?.lastName}\r\n                      </p>\r\n                    </Link>\r\n                    <span className='text-ascent-2 text-sm'>\r\n                      {moment(comment?.timestamp ?? \"2023-05-25\").fromNow()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className='ml-12'>\r\n                  <p className='text-ascent-2'>{comment?.comment}</p>\r\n\r\n                  <div className='mt-2 flex gap-6'>\r\n                    <p className='flex gap-2 items-center text-base text-ascent-2 cursor-pointer'>\r\n                      {comment?.likes?.includes(user?._id) ? (\r\n                        <BiSolidLike size={20} color='blue' />\r\n                      ) : (\r\n                        <BiLike size={20} />\r\n                      )}\r\n                      {comment?.likes?.length} Likes\r\n                    </p>\r\n                    <span\r\n                      className='text-blue cursor-pointer'\r\n                      onClick={() => setReplyComments(comment?._id)}\r\n                    >\r\n                      Reply\r\n                    </span>\r\n                  </div>\r\n\r\n                  {replyComments === comment?._id && (\r\n                    <CommentForm\r\n                      user={user}\r\n                      id={comment?._id}\r\n                      replyAt={comment?.from}\r\n                      getComments={() => getComments(post?._id)}\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {/* REPLIES */}\r\n\r\n                <div className='py-2 px-8 mt-6'>\r\n                  {comment?.replies?.length > 0 && (\r\n                    <p\r\n                      className='text-base text-ascent-1 cursor-pointer'\r\n                      onClick={() =>\r\n                        setShowReply(\r\n                          showReply === comment?.replies?._id\r\n                            ? 0\r\n                            : comment?.replies?._id\r\n                        )\r\n                      }\r\n                    >\r\n                      Show Replies ({comment?.replies?.length})\r\n                    </p>\r\n                  )}\r\n\r\n                  {showReply === comment?.replies?._id &&\r\n                    comment?.replies?.map((reply) => (\r\n                      <ReplyCard\r\n                        reply={reply}\r\n                        user={user}\r\n                        key={reply?._id}\r\n                        // handleLike={() =>\r\n                        //   handleLike(\r\n                        //     \"/posts/like-comment/\" +\r\n                        //       comment?._id +\r\n                        //       \"/\" +\r\n                        //       reply?._id\r\n                        //   )\r\n                        // }\r\n                      />\r\n                    ))}\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <span className='flex text-sm py-4 text-ascent-2 text-center'>\r\n              No Comments, be first to comment\r\n            </span>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCard;"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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"},"metadata":{},"sourceType":"module","externalDependencies":[]}